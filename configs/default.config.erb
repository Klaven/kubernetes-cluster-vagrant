apiVersion: kubeadm.k8s.io/v1beta1
kind: InitConfiguration
localAPIEndpoint:
  advertiseAddress: <%= machine.advertise_address %>
bootstrapTokens:
  - token: <%= cluster.token %>
nodeRegistration:
  kubeletExtraArgs:
   pod-infra-container-image: <%= container_ref :pause %>
---
apiVersion: kubeadm.k8s.io/v1beta1
kind: ClusterConfiguration
kubernetesVersion: <%= kubernetes_version %>
networking:
  dnsDomain: cluster.local
  podSubnet: 10.244.0.0/16
  serviceSubnet: 10.96.0.0/12
dns:
  imageRepository: <%= CONTAINER_IMAGES[:coredns][:repository] %>
  imageTag: <%= CONTAINER_IMAGES[:coredns][:tag] %>
etcd:
  local:
    imageRepository: <%= CONTAINER_IMAGES[:etcd][:repository] %>
    imageTag: <%= CONTAINER_IMAGES[:etcd][:tag] %>